(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2249],{83293:function(e,t,s){Promise.resolve().then(s.bind(s,14172))},14172:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Home}});var l=s(57437),a=s(2265),r=s(65538),o=s(7856),i=s(90706),d=s(57482),c=s(25868),n=s(66631),m=s(23611),x=s(89040),u={src:"/_next/static/media/Group 1043.5454feef.svg",height:39,width:38,blurWidth:0,blurHeight:0},h=s(16691),b=s.n(h);s(38671);var f={src:"/_next/static/media/XIONN.88c15bf8.png",height:724,width:1382,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAQAAAAZxLZ7AAAAO0lEQVR42lXBMQ5AQAAEwJUIFVEpfUl10UjuQQqNn/jfxLVmIv8xKXaH6lRsMXtc7e1VdTGa2tVi0MsH+8klouXaD7YAAAAASUVORK5CYII=",blurWidth:8,blurHeight:4},p={src:"/_next/static/media/Group 1059.e86b9985.png",height:95,width:128,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAArklEQVR42mNoPJGqHnw602Ddfp/ApQeD/VOv5JtPOJ/h2Holx6L5ToEqA4M1A8/WjSmyX7eUfvyyKuZhyiRheQYoSKmw4WMwWRvPt34LA+/vPXWnfu8oPH16KYPyp8Wulf9XJ8sB1fAxwMCjQ1bcQIrn/0qf+h+bSv5/2161CMhngyuYNDWelWGhm+z/XcXOv3c3nP+6t9qFYY+jKFzByadNjOvul3AwIIE5t4o4AH5VRKwDyKfjAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:6},N={src:"/_next/static/media/Group 1060.c9874a50.png",height:94,width:128,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAApklEQVR42mOwsrJiZIACIyMjDk1NTQEQ28TEBCqOAMINDQ0sKSkpCgzoIDMrMy8hIeF/VnZW9P////mhwtxAzMJw6+ZtodSklLKiwqL/CfGJK+IT4t1FRESCVy5eKdFY2yjI8PTtE977f29y6bpr5DPwMiSDFGZlZX0/dvGoyu0nN3kYco4Gq2YfDjVd9W+mZtXCovywyNDfaRXJm+oepuo3XM9RBwArQDwF2w6mQQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6},g=s(7350),j=s(66299),openTroveNotConnected=()=>{let[e,t]=(0,a.useState)(null);(0,a.useEffect)(()=>{let initializeClient=async()=>{let e=await j.oJ.connect("https://rpc.xion-testnet-1.burnt.com:443");t(e)};e||initializeClient()},[e]);let[s,r]=(0,a.useState)(0),[o,d]=(0,a.useState)(0),[c,n]=(0,a.useState)(0),[h,w]=(0,a.useState)(0),[v,y]=(0,a.useState)(0),[A,k]=(0,a.useState)(0),[C,S]=(0,a.useState)(0),[T,F]=(0,a.useState)(0),[E,z]=(0,a.useState)(),[O,H]=(0,a.useState)(0),{data:q}=(0,g.hT)(),{logout:R}=(0,g.Hj)(),[_,D]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let queryresponse=async()=>{if(e)try{let t=await e.queryContractSmart("xion1uw5wzl5mwxv52a2ctanrqgcdwqkz86895l35jw4vztmsul77k7zsyn4rch",{get_config:{}});t&&(y(t.current_price/1e6||0),w(t.lth||0),S(t.liqr/1e6||0),d(t.borrow_rate/t.br_decimal||0),r(t.min_debt/1e6||0),H((null==t?void 0:t.totaldebt)||0))}catch(e){console.error("Error fetching query data",e)}};queryresponse()},[e]),(0,l.jsxs)("div",{className:"md:pt-4  md:p-5 h-full px-2 pt-4 md:h-screen",style:{backgroundColor:"black"},children:[(0,l.jsx)("div",{className:" shadow-lg  rounded-lg md:w-full  m-2",style:{backgroundColor:"#222222"},children:(0,l.jsxs)("div",{className:"md:container flex flex-col md:flex-row  justify-between",children:[(0,l.jsx)("div",{className:" hidden md:block",children:(0,l.jsx)(b(),{src:N,alt:"home",className:"md:ml-0 ml-[20%]"})}),(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsxs)("h6",{className:" text-center title-text2 text-2xl md:text-3xl bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent md:mb-2 mt-4 ",children:["Sign in to access your Trove"," "]}),(0,l.jsxs)("div",{className:"flex flex-col items-center md:flex-row",children:[(0,l.jsxs)("h6",{className:"title-text2 text-center font-medium text-lg bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent mb-2 md:mb-0 md:mr-1",children:["Mint ORE stablecoin by depositing"," "]}),(0,l.jsx)(b(),{src:f,alt:"home",height:40,className:"md:-mt-2 inline-block"})]})]}),(0,l.jsx)("div",{className:"hidden md:block",children:(0,l.jsx)(b(),{src:p,alt:"home",className:"md:ml-0 ml-[20%]"})})]})}),(0,l.jsx)("div",{className:"md:container pt-2  body-text flex flex-col md:flex-row justify-between",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)("div",{className:"grid space-y-5 w-full max-w-sm items-start gap-2 mx-auto   p-5",children:(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(i._,{htmlFor:"items",className:"title-text2 text-xl text-md bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent",style:{fontWeight:"500"},children:"Deposit collateral to mint ORE"}),(0,l.jsxs)("div",{className:"rounded-lg flex mb-4 mt-[8px] items-center border  md:w-[481px] border-gray-400 bg-[#343434] overflow-hidden ",children:[(0,l.jsxs)("div",{className:"flex items-center h-[3.5rem]",children:[(0,l.jsx)(b(),{src:x.Z,alt:"home",className:"ml-1",width:40}),(0,l.jsx)("h3",{className:"text-white body-text ml-1 font-medium",children:"XION"}),(0,l.jsx)("h3",{className:"h-full border border-gray-100 mx-3 text-[#88e273]"})]}),(0,l.jsx)("input",{id:"items",placeholder:"Enter the amount of collateral",disabled:!0,onChange:e=>{e.target.value},className:"body-text text-sm font-medium text-[#8B8B8B] whitespace-nowrap cursor-not-allowed h-[3.5rem] flex-grow",style:{backgroundColor:"#343434"}})]}),(0,l.jsxs)("span",{className:"body-text font-medium text-gray-500 text-sm ",children:["Wallet Balance"," "]}),(0,l.jsxs)("div",{className:"text-white flex flex-col md:flex-row md:gap-x-10",children:[(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsxs)("div",{className:"text-[#88e273] mt-2  body-text whitespace-nowrap mr-2 font-medium",children:[" ","0.00 XION",""]}),(0,l.jsxs)("div",{className:"text-gray-500 mt-2 body-text font-medium",children:["$0.00"," "]})]}),(0,l.jsxs)("div",{children:[" ",(0,l.jsxs)("div",{className:"flex md:ml-2 gap-x-4 md:gap-x-2 w-full  md:-mr-2  ",children:[(0,l.jsx)(m.z,{disabled:!0,className:"text-sm border  rounded-3xl  border-[#9A9A9A78] bg-[#222222] hover:first:bg-[#222222]  body-text",children:"25%"}),(0,l.jsx)(m.z,{disabled:!0,className:"text-sm border rounded-3xl   border-[#9A9A9A78] bg-[#222222] hover:first:bg-[#222222] body-text",children:"50%"}),(0,l.jsx)(m.z,{disabled:!0,className:"text-sm border rounded-3xl   body-text border-[#9A9A9A78] bg-[#222222] hover:first:bg-[#222222]",children:"75%"}),(0,l.jsx)(m.z,{disabled:!0,className:"text-sm border rounded-3xl   border-[#9A9A9A78] bg-[#222222] hover:first:bg-[#222222] body-text",children:"100%"})]})]})]})]})}),(0,l.jsxs)("div",{className:"grid space-y-5 w-full max-w-sm items-start gap-2 mx-auto   p-5",children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(i._,{htmlFor:"items",className:"title-text2 text-xl text-md bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent",style:{fontWeight:"500"},children:"Great you got 0.00 ORE to mint"}),(0,l.jsxs)("div",{className:"rounded-lg flex mb-4 mt-[8px] items-center border  md:w-[481px] border-gray-400 bg-[#343434] overflow-hidden ",children:[(0,l.jsxs)("div",{className:"flex items-center h-[3.5rem]",children:[(0,l.jsx)(b(),{src:u,alt:"home",className:"ml-1",width:40}),(0,l.jsx)("h3",{className:"text-white body-text ml-1 font-medium",children:"ORE"}),(0,l.jsx)("h3",{className:"h-full border border-gray-100 mx-3 text-[#88e273]"})]}),(0,l.jsx)("input",{id:"items",placeholder:"Enter the amount you want to mint",disabled:!0,onChange:e=>{e.target.value},className:"body-text text-sm font-medium text-[#8B8B8B] whitespace-nowrap cursor-not-allowed h-[3.5rem] flex-grow",style:{backgroundColor:"#343434"}})]}),(0,l.jsxs)("span",{className:"body-text font-medium text-gray-500 text-sm ",children:["Available"," "]}),(0,l.jsxs)("div",{className:"text-white flex flex-col md:flex-row md:gap-x-10",children:[(0,l.jsxs)("div",{className:"flex flex-row",children:[(0,l.jsxs)("div",{className:"text-[#88e273] mt-2  body-text whitespace-nowrap mr-2 font-medium",children:[" ","0.00 ORE",""]}),(0,l.jsxs)("div",{className:"text-gray-500 mt-2 body-text font-medium",children:["$0.00"," "]})]}),(0,l.jsxs)("div",{children:[" ",(0,l.jsxs)("div",{className:"flex md:ml-2 gap-x-4 md:gap-x-2 w-full  md:-mr-2  ",children:[(0,l.jsx)(m.z,{disabled:!0,className:"text-sm border  rounded-3xl  border-[#9A9A9A78] bg-[#222222] hover:first:bg-[#222222]  body-text",children:"25%"}),(0,l.jsx)(m.z,{disabled:!0,className:"text-sm border rounded-3xl   border-[#9A9A9A78] bg-[#222222] hover:first:bg-[#222222] body-text",children:"50%"}),(0,l.jsx)(m.z,{disabled:!0,className:"text-sm border rounded-3xl   body-text border-[#9A9A9A78] bg-[#222222] hover:first:bg-[#222222]",children:"75%"}),(0,l.jsx)(m.z,{disabled:!0,className:"text-sm border rounded-3xl   border-[#9A9A9A78] bg-[#222222] hover:first:bg-[#222222] body-text",children:"100%"})]})]})]})]}),(0,l.jsx)("button",{className:"rounded-3xl mt-5 md:-ml-0 -ml-4  h-[3rem] px-10 bg-[#88e273] title-text text-black font-bold   cursor-not-allowed opacity-50  ",style:{cursor:"not-allowed"},disabled:!0,children:"Login to get started"})]})]})})]})},w={src:"/_next/static/media/INACTIVE.23c3bca7.svg",height:26,width:95,blurWidth:0,blurHeight:0},v={src:"/_next/static/media/Group 665.35ee2718.svg",height:13,width:53,blurWidth:0,blurHeight:0},y=s(24229),A={src:"/_next/static/media/conf.14544d77.gif",height:544,width:550,blurWidth:0,blurHeight:0},k={src:"/_next/static/media/rec2.c17f51da.gif",height:544,width:550,blurWidth:0,blurHeight:0},C=s(87656),S={src:"/_next/static/media/tick.02dbffb0.gif",height:492,width:506,blurWidth:0,blurHeight:0},T=s(31956),F=s(61092),E=s(96061),z=s(81628);let O=(0,E.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),H=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(i.f,{ref:t,className:(0,z.cn)(O(),s),...a})});H.displayName=i.f.displayName;var q=s(79635),R=s(8409);s(22032);var _=s(5397),D=s(27833),P=s(87415),Z={src:"/_next/static/media/info1.e533fc31.svg",height:21,width:22,blurWidth:0,blurHeight:0},W=s(92173);let Repay=e=>{let{coll:t,debt:s,lr:r,fetchedPrice:o,recoveryMode:i,minDebt:n,cCR:h,mCR:f,liqp:p}=e,[N,j]=(0,a.useState)({lusdAmount:"",coll:""}),w="xion1uw5wzl5mwxv52a2ctanrqgcdwqkz86895l35jw4vztmsul77k7zsyn4rch",v="xion16p0xarpw90z3udum8camllltm2ayuxyspzm62pa2aprtwws5lqpqymjzdq",[T,F]=(0,a.useState)(!1),[E,z]=(0,a.useState)(0),[O,I]=(0,a.useState)(!1),[B,L]=(0,a.useState)(0),[V,M]=(0,a.useState)(0),[X,U]=(0,a.useState)(!1),[$,G]=(0,a.useState)(0),[Q,K]=(0,a.useState)(0),[Y,J]=(0,a.useState)(""),[ee,et]=(0,a.useState)(!1),[es,el]=(0,a.useState)(!1),[ea,er]=(0,a.useState)(0),[eo,ei]=(0,a.useState)(0),[ed,ec]=(0,a.useState)(0),[en,em]=(0,a.useState)(0),[ex,eu]=(0,a.useState)(!1),[eh,eb]=(0,a.useState)(null),[ef,ep]=(0,a.useState)(null),{data:eN}=(0,g.hT)(),{client:eg,logout:ej}=(0,g.Hj)(),[ew,ev]=(0,a.useState)(!1),[ey,eA]=(0,a.useState)(!1),[ek,eC]=(0,a.useState)(""),[eS,eT]=(0,a.useState)(!1),[eF,eE]=(0,a.useState)(!1),[ez,eO]=(0,a.useState)(void 0);(0,a.useEffect)(()=>{eN&&""!=eN.bech32Address?ev(!0):ev(!1)},[eN]);let eH=(0,a.useCallback)(()=>{et(!1),el(!1),I(!1),eu(!1),window.location.reload()},[]);(0,a.useEffect)(()=>{let e=d.Z.pow(10,18);(0,q.Gh)(e.toFixed());let fetchedData=async()=>{if(!eg)return null;new d.Z(t.toString())},getStaticData=async()=>{if(!eg)return null;let e=100*Number(s)/(Number(t)*Number(o)||1);em(e),F(!0)};fetchedData(),getStaticData()},[eg]),(0,c.Z)(()=>{makeCalculations(N.lusdAmount,N.coll)},10,[N.lusdAmount,N.coll]);let handleApprove=async(e,t)=>{eA(!0),I(!0),e=Math.floor(1e6*Number(e)).toString(),t=Math.floor(1e6*Number(t)).toString();try{if(!eg||!eN)throw Error("Wallet not connected");let s=await eg.execute(eN.bech32Address,"xion1svpxs5ay7w7ddznk6krk7q9f8rs973vm2fgvud84zm8s8fdkt94sc7j3a6",{increase_allowance:{spender:w,amount:e}},{amount:[{amount:"0",denom:"uxion"}],gas:"500000",granter:v},"",[]);if(s&&s.transactionHash){console.log("Allowance successful:",s.transactionHash),eO(s),eC(s.transactionHash);let l=await eg.execute(eN.bech32Address,w,{repay_or_withdraw:{amount_repay:e,amount_withdraw:t}},{amount:[{amount:"0",denom:"uxion"}],gas:"500000",granter:v},"",[]);if(console.log("Repay/Withdraw successful:",l.transactionHash),eT(!0),l&&l.transactionHash)try{await W.Z.post("https://xion.api.earthfi.org/adjustTrove",{walletAddress:null==eN?void 0:eN.bech32Address}),console.log("Update trove stored successfully.")}catch(e){console.error("Failed to store wallet address:",e)}else console.error("Repay/Withdraw api transaction failed")}else throw Error("Allowance transaction failed")}catch(e){eE(!0),console.error("Deposit error:",e),P.Am.error("Deposit failed"),eu(!0),el(!0)}finally{eA(!1)}},handlePercentageClick=e=>{let t=new d.Z(e).div(100),s=parseFloat(eP.toString());if(isNaN(s))console.error("Invalid ORE balance:",e_);else{let l=new d.Z(s).mul(t);j({coll:N.coll,lusdAmount:String(l)}),eb(e)}},handlePercentageClickBTC=e=>{let t=new d.Z(e).div(100);if(isNaN(ed))console.error("Invalid ORE balance:");else{let s=new d.Z(ed).mul(t),l=s.toFixed(8);j({coll:l,lusdAmount:N.lusdAmount}),ep(e)}},makeCalculations=async(e,l)=>{try{let a=Number(e),r=Number(l),i=Number(s)-a;z(i);let d=Number(t)-r;K(d);let c=100*i/((d||1)*Number(o));L(c);let n=Number(p)/100,m=n*i/d;G(m);let x=Number(t)-eq*i/Number(o);ec(x),parseFloat(N.coll)>0?er(1):er(0),parseFloat(N.lusdAmount)>0?ei(1):ei(0)}catch(e){console.error(e,"Error in makeCalculations")}},eq=Number(f)/100,eR=Number(p)/100,e_=V/eq-Number(s),eD=eR*(Number(s)/Number(t)),eP=Number(s)-n-r,eZ=parseFloat(N.coll)>ed,eW=parseFloat(N.lusdAmount)>eP,eI=(100*Number(s)/(Number(t)*Number(o))).toFixed(2),eB=ea+eo>=1||parseFloat(N.coll)<Number(t)||parseFloat(N.lusdAmount)<Number(s);return(0,a.useEffect)(()=>{eF&&(console.error("Write contract error:"),eu(!0),el(!0))},[eF]),(0,a.useEffect)(()=>{ey?(I(!1),J("Waiting for transaction to confirm.."),et(!0)):eS?(J("Trove updated successfully"),et(!0)):ex&&(J("Transaction was rejected"),et(!0))},[eS,ey,ex]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{U(!0)},2e5);return()=>clearTimeout(e)},[]),parseFloat(N.coll),(0,l.jsxs)("div",{className:"flex-col mx-2  flex md:flex-row justify-between gap-10",children:[(0,l.jsxs)("div",{className:"grid w-full md:w-1/2  space-y-7   items-start gap-2 py-7 pr-7   md:py-5 md:pr-5 md:pl-2",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(H,{className:"title-text2 text-xl text-md bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent",style:{fontWeight:"500",fontSize:"19px"},children:"Repay ORE to withdraw collateral"}),(0,l.jsxs)("div",{className:"rounded-lg flex items-center mt-4 w-[19rem] md:w-[100%] md:-ml-0  border border-gray-400 px-2",style:{backgroundColor:"#343434",marginBottom:"1rem"},children:[(0,l.jsxs)("div",{className:"flex items-center h-[3.5rem]",children:[(0,l.jsx)(b(),{src:u,alt:"home",className:"ml-1",width:35}),(0,l.jsx)("h6",{className:"text-white text-sm font-medium hidden md:block body-text ml-1",children:"ORE"}),(0,l.jsx)("h3",{className:"h-full border border-gray-400 mx-4 text-[#88e273]"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center flex-1 gap-x-4",children:[(0,l.jsx)("input",{id:"items",placeholder:"Enter the amount to return",disabled:!ew,value:N.lusdAmount,onChange:e=>{let t=e.target.value;j({...N,lusdAmount:t})},className:"body-text text-sm w-full min-w-0 h-[4rem] text-gray-400 px-2",style:{backgroundColor:"#343434"}}),(0,l.jsxs)("span",{className:"text-sm body-text text-gray-400 whitespace-nowrap",children:["$",parseFloat(N.lusdAmount||"0").toFixed(2)]})]})]}),(0,l.jsx)("span",{className:"body-text font-medium text-gray-500 text-sm -mb-2",children:"Available"}),(0,l.jsxs)("div",{className:"pt-2  flex md:flex-row flex-col items-center justify-between   ",children:[(0,l.jsxs)("span",{className:"text-[#88e273] body-text font-medium text-sm flex flex-row ",children:[Number(eP)>=0&&(0,l.jsxs)("h6",{className:"text-sm  font-medium body-text whitespace-nowrap mt-2 ".concat(parseFloat(N.lusdAmount)>eP?"text-red-500":"text-[#88e273]"),children:[Math.trunc(100*Number(eP))/100," ORE",(0,l.jsx)("div",{})]}),(0,l.jsxs)("span",{className:"text-gray-500 ml-1 body-text font-medium text-sm mt-2",children:["$",eP>=0?Math.floor(100*eP)/100:"0.00"," "]})]}),(0,l.jsx)("div",{className:"flex flex-col md:flex-row  justify-between items-center",children:(0,l.jsxs)("div",{className:"flex gap-x-4 md:gap-x-2 w-full ",children:[(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273]  body-text bg-[#222222] border-[#9A9A9A78] hover:bg-[#222222]",onClick:()=>handlePercentageClick(25),children:"25%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClick(50),children:"50%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClick(75),children:"75%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClick(100),children:"100%"})]})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("div",{className:"mb-1",children:(0,l.jsx)(H,{htmlFor:"items",className:"title-text2 text-2xl text-md bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent",style:{fontWeight:"500",fontSize:"19px"},children:"Withdraw Collateral"})}),(0,l.jsxs)("div",{className:"rounded-lg flex items-center mt-4 w-[19rem] md:w-[100%] md:-ml-0  border border-gray-400 px-2",style:{backgroundColor:"#343434",marginBottom:"1rem"},children:[(0,l.jsxs)("div",{className:"flex items-center h-[3.5rem]",children:[(0,l.jsx)(b(),{src:x.Z,alt:"home",className:"ml-1",width:41}),(0,l.jsx)("h6",{className:"text-white text-sm font-medium hidden md:block body-text ml-1",children:"XION"}),(0,l.jsx)("h3",{className:"h-full border border-gray-400 mx-4 text-[#88e273]"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center flex-1 gap-x-4",children:[(0,l.jsx)("input",{id:"items",placeholder:"Enter the amount of collateral",disabled:!ew,value:N.coll,onChange:e=>{let t=e.target.value;j({...N,coll:t})},className:"body-text text-sm w-full min-w-0 h-[4rem] text-gray-400 px-2",style:{backgroundColor:"#343434"}}),(0,l.jsxs)("span",{className:"text-sm body-text text-gray-400 whitespace-nowrap",children:["$",(parseFloat(N.coll||"0")*Number(o)).toFixed(2)]})]})]}),(0,l.jsxs)("span",{className:"body-text font-medium text-gray-500 text-sm ",children:["Available"," "]}),(0,l.jsxs)("div",{className:"pt-2  flex md:flex-row flex-col items-center justify-between   mt-[-1rem]",children:[(0,l.jsxs)("span",{className:"text-sm  font-medium body-text whitespace-nowrap ".concat(Number(N.coll)>ed?"text-red-500":"text-[#88e273]"),children:[" ",ed.toFixed(2)," XION",(0,l.jsxs)("span",{className:"text-gray-500 ml-1 body-text font-medium text-sm",children:["$",(50*Number(ed)).toFixed(2)]})]}),(0,l.jsx)("div",{className:"flex flex-col md:flex-row  justify-between items-center",children:(0,l.jsxs)("div",{className:"flex gap-x-4 md:gap-x-2 w-full mt-2",children:[(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273]  body-text bg-[#222222] border-[#9A9A9A78] hover:bg-[#222222]",onClick:()=>handlePercentageClickBTC(25),children:"25%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClickBTC(50),children:"50%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClickBTC(75),children:"75%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClickBTC(100),children:"100%"})]})})]})]}),(0,l.jsx)("button",{onClick:()=>handleApprove(N.lusdAmount,N.coll),className:"rounded-3xl mt-5 md:-ml-0  w-[19.5rem] md:w-full title-text h-[3rem]\n             ".concat(eW||eZ||ea+eo==0?"bg-[#88e273] text-black cursor-not-allowed opacity-50":"hover:scale-95 cursor-pointer bg-[#88e273] text-black"),disabled:eW||eZ||ea+eo==0,children:"UPDATE TROVE"})]}),(0,l.jsx)("div",{className:"rounded-3xl px-1 pl-5 w-[18rem] -ml-4 md:px-6 md:w-1/2 pt-9  md:h-[21rem] ".concat(eB?"p-4":" p-16"," md:pt-10 md:mt-10 text-sm"),style:{backgroundColor:"#222222"},children:(0,l.jsxs)("div",{className:"mb-4  space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,l.jsxs)("div",{className:"md:w-1/2 flex items-center",children:[(0,l.jsx)("span",{className:"body-text text-lg whitespace-nowrap text-[#84827a] font-medium",children:"Loan-To-Value"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding9 ml_5 cursor-pointer",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:" title-text2",target:".toolTipHolding9",content:"It is a ratio that measures the amount of a loan compared to the value of the collateral.",mouseTrack:!0,mouseTrackLeft:10})]}),(0,l.jsx)("div",{className:"md:w-1/2 text-lg whitespace-nowrap body-text flex justify-end pl-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsxs)("span",{className:"font-medium body-text",children:[Number(eI).toFixed(2),"%"]}),ea+eo>=1&&Number(N.coll)<Number(t)&&Number(N.lusdAmount)<Number(s)&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-x-2",children:[(0,l.jsx)("span",{className:"text-[#88e273] text-sm",children:(0,l.jsx)(R.dhL,{})}),(0,l.jsxs)("span",{className:"text-lg body-text font-medium ".concat(B>100/Number(eq)?"text-red-500":""),children:[" ",Number(B).toFixed(2),"%"]})]})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row ",children:[(0,l.jsx)("div",{className:"md:w-1/2 flex items-center",children:(0,l.jsx)("span",{className:"body-text text-lg whitespace-nowrap text-[#84827a] font-medium",children:"Liquidation Price"})}),(0,l.jsx)("div",{className:"md:w-1/2 text-sm whitespace-nowrap body-text flex justify-end pl-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsxs)("span",{className:"font-medium body-text text-lg",children:["$",Number(eD).toFixed(2)]}),ea+eo>=1&&Number(N.coll)<Number(t)&&Number(N.lusdAmount)<Number(s)&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-x-2",children:[(0,l.jsx)("span",{className:"text-[#88e273] text-sm",children:(0,l.jsx)(R.dhL,{})}),(0,l.jsxs)("span",{className:"text-lg body-text font-medium",children:["$",Number($).toFixed(2)]})]})]})})]}),(0,l.jsxs)("div",{className:"flex flex-row  mt-6",children:[" ",(0,l.jsx)(b(),{src:Z,alt:"info",className:"mr-2 mt-[-1rem]",width:21,height:21}),(0,l.jsxs)("p",{className:"text-xs text-[#827f77] body-text font-medium 2xl:-mt-2",children:["If the market price falls below the liquidation price, the Trove maybe liquidated."," "]})," "]}),(0,l.jsx)("div",{children:(0,l.jsx)("hr",{className:"border-[#827f77] border-1 mt-4 mb-4"})}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,l.jsxs)("div",{className:"md:w-1/2 flex items-center",children:[(0,l.jsx)("span",{className:"body-text text-sm whitespace-nowrap text-[#84827a] font-medium",children:"Total Debt"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding11 ml_5 cursor-pointer",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:" title-text2",target:".toolTipHolding11",content:"Total amount of stablecoin borrowed + liquidation reserve + borrowing fee of the position.",mouseTrack:!0,mouseTrackLeft:10})]}),(0,l.jsx)("div",{className:"md:w-1/2 text-sm whitespace-nowrap body-text flex justify-end pl-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsxs)("span",{className:"font-medium body-text",children:[Number(s).toFixed(2)," ORE"]}),1==eo&&parseFloat(N.lusdAmount)<Number(s)&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-x-2",children:[(0,l.jsx)("span",{className:"text-[#88e273] text-sm",children:(0,l.jsx)(R.dhL,{})}),(0,l.jsxs)("span",{className:"text-sm body-text font-medium",children:[Number(E).toFixed(2)," ORE"]})]})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,l.jsxs)("div",{className:"md:w-1/2 flex items-center",children:[(0,l.jsx)("span",{className:"body-text text-sm whitespace-nowrap text-[#84827a] font-medium",children:"Total Collateral"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding12  ml_5 cursor-pointer",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:" title-text2",target:".toolTipHolding12",mouseTrack:!0,content:"Total amount of collateral supplied in the position.",mouseTrackLeft:10})]}),(0,l.jsx)("div",{className:"md:w-1/2 text-sm whitespace-nowrap body-text flex justify-end pl-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsxs)("span",{className:"font-medium body-text",children:[Number(t).toFixed(2)," ORE"]}),ea>0&&parseFloat(N.coll)<Number(t)&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-x-2",children:[(0,l.jsx)("span",{className:"text-[#88e273] text-sm",children:(0,l.jsx)(R.dhL,{})}),(0,l.jsxs)("span",{className:"text-sm body-text font-medium \n                                               \n                                                  ",children:[" ",Number(Q).toFixed(2)," XION"]})]})]})})]})]})}),(0,l.jsx)(_.V,{visible:O,onHide:()=>I(!1),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-content",children:[(0,l.jsx)("div",{className:"py-5",children:(0,l.jsx)(b(),{src:k,alt:"box",width:140,className:""})}),(0,l.jsx)("div",{className:"p-5",children:(0,l.jsx)("div",{className:"waiting-message text-lg title-text2 text-[#88e273] whitespace-nowrap",children:"Transaction is initiated"})})]})})}),(0,l.jsx)(_.V,{visible:es,onHide:()=>el(!1),header:()=>(0,l.jsx)("div",{className:"flex justify-content-between align-items-center",children:(0,l.jsx)(m.z,{className:"p-button-rounded p-button-text",onClick:()=>el(!1),children:"Close"})}),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsx)("div",{className:"dialog-content",children:(0,l.jsxs)("div",{className:"p-5",children:[(0,l.jsx)("div",{className:"waiting-message text-lg title-text text-white whitespace-nowrap",children:"Transaction rejected"}),(0,l.jsx)(m.z,{className:"p-button-rounded p-button-text",onClick:()=>el(!1),children:"Close"})]})})})}),(0,l.jsx)(_.V,{visible:ee,onHide:()=>et(!1),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsx)("div",{className:"dialog-content",children:(0,l.jsxs)("div",{className:"p-5",children:["Waiting for transaction to confirm.."===Y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b(),{src:A,alt:"rectangle",width:150}),(0,l.jsx)("div",{className:"my-5 ml-[6rem] mb-5"})]}):"Trove updated successfully"===Y?(0,l.jsx)(b(),{src:S,alt:"tick",width:200}):ex?(0,l.jsx)(b(),{src:y.Z,alt:"rejected",width:140}):(0,l.jsx)(b(),{src:A,alt:"box",width:140}),(0,l.jsx)("div",{className:"waiting-message title-text2 text-[#88e273]",children:Y}),eS&&(0,l.jsx)("button",{className:"mt-1 p-3 text-black title-text2 hover:scale-95 bg-[#88e273]",onClick:eH,children:"Close"}),(ex||!eS&&X)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"body-text text-white text-xs",children:ex?"Transaction was rejected. Please try again.":"Some Error Occurred On Network Please Try Again After Some Time.. \uD83E\uDD16"}),(0,l.jsx)(m.z,{className:" mt-1 p-3 text-black rounded-none md:w-[20rem] title-text2 hover:bg-[#6cd854] hover:scale-95 bg-[#88e273]",onClick:eH,children:"Try again"})]})]})})})})]})};s(58970);let CloseTrove=e=>{let{entireDebtAndColl:t,debt:s,liquidationReserve:r,debtwithoutDecimals:o}=e,i="xion1uw5wzl5mwxv52a2ctanrqgcdwqkz86895l35jw4vztmsul77k7zsyn4rch",d="xion1svpxs5ay7w7ddznk6krk7q9f8rs973vm2fgvud84zm8s8fdkt94sc7j3a6",c="xion16p0xarpw90z3udum8camllltm2ayuxyspzm62pa2aprtwws5lqpqymjzdq",[n,x]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[N,j]=(0,a.useState)(""),[w,v]=(0,a.useState)(!1),[T,F]=(0,a.useState)(!1),[E,z]=(0,a.useState)(!1),[O,H]=(0,a.useState)(!1),{data:q}=(0,g.hT)(),{client:R,logout:Z}=(0,g.Hj)(),[I,B]=(0,a.useState)(!1),[L,V]=(0,a.useState)(void 0),[M,X]=(0,a.useState)(""),[U,$]=(0,a.useState)(!1),[G,Q]=(0,a.useState)(!1),[K,Y]=(0,a.useState)(!1),[J,ee]=(0,a.useState)("");(0,a.useEffect)(()=>{q&&""!=q.bech32Address?B(!0):B(!1)},[q]);let et=(0,a.useCallback)(()=>{p(!1),F(!1),x(!1),H(!1),window.location.reload()},[]),checkPusdBalance=async()=>{if(R&&q)try{let e={balance:{address:q.bech32Address}},t=await R.queryContractSmart(d,e),l=Number(t.balance)/1e6;Number(l)<s-r&&h(!0),v(!1),ee(l.toFixed(2))}catch(e){console.error("Error fetching USDC balance:",e)}};(0,a.useEffect)(()=>{checkPusdBalance()},[J,R,M]);let handleApprove=async(e,t)=>{$(!0),x(!0),e=Number(e).toString(),t=(1e6*Number(t)).toString();try{if(!R||!q)throw Error("Wallet not connected");let t=await R.execute(q.bech32Address,d,{increase_allowance:{spender:i,amount:e}},{amount:[{amount:"0",denom:"uxion"}],gas:"500000",granter:c},"",[]);if(console.log("allowance response",t),t&&t.transactionHash){console.log("Allowance successful:",t.transactionHash),V(t),X(t.transactionHash);let e=await R.execute(q.bech32Address,i,{close_trove:{}},{amount:[{amount:"0",denom:"uxion"}],gas:"500000",granter:c},"",[]);if(console.log("close successful:",e.transactionHash),Q(!0),e&&e.transactionHash)try{await W.Z.post("https://xion.api.earthfi.org/closeTrove",{walletAddress:null==q?void 0:q.bech32Address}),console.log("close trove stored successfully.")}catch(e){console.error("apis fail:",e)}else console.error("Repay/Withdraw api transaction failed")}else throw Error("Allowance transaction failed")}catch(e){Y(!0),console.error("Deposit error:",e),P.Am.error("Deposit failed"),H(!0),F(!0)}finally{$(!1)}};return(0,a.useEffect)(()=>{K&&(console.error("Write contract error:"),H(!0),F(!0))},[K]),(0,a.useEffect)(()=>{U?(x(!1),j("Waiting for transaction to confirm.."),p(!0)):G?(j("Trove closed successfully."),p(!0)):O&&(j("Transaction was rejected"),p(!0))},[G,U,O]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{z(!0)},18e4);return()=>clearTimeout(e)},[]),(0,l.jsxs)("div",{className:"md:w-[60rem] flex md:-ml-0 w-[2rem]",children:[(0,l.jsxs)("div",{className:"relative text-white text-base flex flex-col  gap-2 p-5 md:p-10",children:[(0,l.jsxs)("div",{className:"space-y-7",children:[(0,l.jsxs)("div",{className:"flex md:gap-52 justify-between",children:[(0,l.jsxs)("span",{className:"flex",children:[(0,l.jsx)("span",{className:"md:ml-0 ml-1 text-sm body-text text-[#84827a] font-medium",children:"Collateral"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding5 ml_5 -mt-[3px]",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:"custom-tooltip title-text2",target:".toolTipHolding5",mouseTrack:!0,content:"Total amount of collateral supplied in the position.",mouseTrackLeft:10})]}),0>=Number(t)?"--":(0,l.jsxs)("span",{className:"body-text font-medium text-sm md:mr-0 mr-4 whitespace-nowrap",children:[Number(t).toFixed(2)," XION"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"md:ml-0 ml-1 text-sm body-text text-[#84827a] font-medium",children:"Debt"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding6 ml_5 -mt-[5px]",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:"custom-tooltip title-text2",target:".toolTipHolding6",mouseTrack:!0,content:"The amount of stablecoin you owe.",mouseTrackLeft:10})]}),0>=Number(s)?"---":(0,l.jsxs)("span",{className:"body-text font-medium text-sm md:mr-0 mr-4 whitespace-nowrap",children:[Number(s).toFixed(2)," ORE"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"md:ml-0 ml-1 text-sm body-text font-medium text-[#84827a]",children:"Liquidation Reserve"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding7 ml_5 -mt-[px]",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:"custom-tooltip title-text2",target:".toolTipHolding7",mouseTrack:!0,content:"The amount of debt set aside as a buffer to cover potential liquidation. This reserve helps ensure that there are sufficient funds to handle any shortfalls or losses that may occur.",mouseTrackLeft:10})]}),0>=Number(r)?"--":(0,l.jsxs)("span",{className:"body-text md:mr-0 mr-4 font-medium text-sm",children:[Number(r).toFixed(2)," ORE"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"body-text font-medium text-[#84827a] text-sm ml-1 md:ml-0",children:"Wallet Balance"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding8 ml_5 ",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:"custom-tooltip title-text2",target:".toolTipHolding8",mouseTrack:!0,content:"The amount of ORE currently available in your wallet for transactions or withdrawals.",mouseTrackLeft:10})]}),(0,l.jsx)("span",{className:"body-text font-medium text-sm mr-4 md:mr-0",children:w?(0,l.jsx)("div",{className:"h-2 mr-20 text-left",children:(0,l.jsx)("div",{className:"hex-loader"})}):"".concat(Number(J).toFixed(2)," ORE")})]})]}),(0,l.jsx)("button",{onClick:()=>handleApprove(String(o),String(t)),disabled:u||w,className:"rounded-3xl mt-20 md:w-full md:ml-0 ml-1 w-[18.2rem] h-[3rem] bg-[#88e273] text-black title-text ".concat(u||w?"cursor-not-allowed opacity-50":"hover:scale-95 cursor-pointer"),children:"Close Trove"}),(0,l.jsx)("div",{className:"text-red-500 text-sm font-medium body-text w-full ml-1",children:u?"Low balance: unable to close trove":null})]}),(0,l.jsx)(_.V,{visible:n,onHide:()=>x(!1),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-content",children:[(0,l.jsx)("div",{className:"py-5",children:(0,l.jsx)(b(),{src:k,alt:"box",width:140,className:""})}),(0,l.jsx)("div",{className:"p-5",children:(0,l.jsx)("div",{className:"waiting-message text-lg title-text2 text-[#88e273] whitespace-nowrap",children:"Transaction is initiated"})})]})})}),(0,l.jsx)(_.V,{visible:T,onHide:()=>F(!1),header:()=>(0,l.jsx)("div",{className:"flex justify-content-between align-items-center",children:(0,l.jsx)(m.z,{className:"p-button-rounded p-button-text",onClick:()=>F(!1),children:"Close"})}),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsx)("div",{className:"dialog-content",children:(0,l.jsxs)("div",{className:"p-5",children:[(0,l.jsx)("div",{className:"waiting-message text-lg title-text text-white whitespace-nowrap",children:"Transaction rejected"}),(0,l.jsx)(m.z,{className:"p-button-rounded p-button-text",onClick:()=>F(!1),children:"Close"})]})})})}),(0,l.jsx)(_.V,{visible:f,onHide:()=>p(!1),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsx)("div",{className:"dialog-content",children:(0,l.jsxs)("div",{className:"p-5",children:["Waiting for transaction to confirm.."===N?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b(),{src:A,alt:"rectangle",width:150}),(0,l.jsx)("div",{className:"my-5 ml-[6rem] mb-5"})]}):"Trove closed successfully."===N?(0,l.jsx)(b(),{src:S,alt:"tick",width:200}):O?(0,l.jsx)(b(),{src:y.Z,alt:"rejected",width:140}):(0,l.jsx)(b(),{src:A,alt:"box",width:140}),(0,l.jsx)("div",{className:"waiting-message title-text2 text-[#88e273]",children:N}),G&&(0,l.jsx)("button",{className:"mt-1 p-3 text-black title-text2 hover:scale-95 bg-[#88e273]",onClick:et,children:"Close"}),(O||!G&&E)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"body-text text-white text-xs",children:O?"Transaction was rejected. Please try again.":"Some Error Occurred On Network Please Try Again After Some Time.. \uD83E\uDD16"}),(0,l.jsx)(m.z,{className:" mt-1 p-3 rounded-none md:w-[20rem] text-black title-text2 hover:bg-[#6cd854] hover:scale-95 bg-[#88e273]",onClick:et,children:"Try again"})]})]})})})})]})};s(48034);var I=s(7433),B={src:"/_next/static/media/xionnn.e74f19cb.svg",height:17,width:22,blurWidth:0,blurHeight:0},L=s(99902);let OpenTrove=()=>{let[e,t]=(0,a.useState)({collatoral:"",borrow:""}),s="xion1uw5wzl5mwxv52a2ctanrqgcdwqkz86895l35jw4vztmsul77k7zsyn4rch",[r,o]=(0,a.useState)(!1),[i,n]=(0,a.useState)(!0),[h,f]=(0,a.useState)(!1),[j,w]=(0,a.useState)(0),[v,T]=(0,a.useState)(0),[F,E]=(0,a.useState)(0),[z,O]=(0,a.useState)(0),[q,R]=(0,a.useState)(0),[V,M]=(0,a.useState)(0),[X,U]=(0,a.useState)(),[$,G]=(0,a.useState)(""),[Q,K]=(0,a.useState)(!1),[Y,J]=(0,a.useState)(!1),[ee,et]=(0,a.useState)(!1),[es,el]=(0,a.useState)(""),[ea,er]=(0,a.useState)(""),[eo,ei]=(0,a.useState)(!1),[ed,ec]=(0,a.useState)(!1),[en,em]=(0,a.useState)(!1),[ex,eu]=(0,a.useState)(""),[eh,eb]=(0,a.useState)(""),{data:ef}=(0,g.hT)(),{client:ep,logout:eN}=(0,g.Hj)(),[eg,ej]=(0,g.dd)(),[ew,ev]=(0,a.useState)(!1),[ey,eA]=(0,a.useState)(!1),[ek,eC]=(0,a.useState)(void 0),[eS,eT]=(0,a.useState)(""),[eF,eE]=(0,a.useState)(void 0),[ez,eO]=(0,a.useState)(0),[eH,eq]=(0,a.useState)(0),[eR,e_]=(0,a.useState)("0"),[eD,eP]=(0,a.useState)(null),[eZ,eW]=(0,a.useState)(null);(0,a.useEffect)(()=>{ep&&n(!1)},[ep]),(0,a.useEffect)(()=>{let queryresponse=async()=>{if(ep)try{let e=await ep.queryContractSmart(s,{get_config:{}});e&&(M(e.current_price/1e6||0),R(e.lth||0),E(e.liqr/1e6||0),T(e.borrow_rate/e.br_decimal||0),w(e.min_debt/1e6||0),eq((null==e?void 0:e.totaldebt)||0))}catch(e){console.error("Error fetching query data",e)}};queryresponse()},[ep]),(0,a.useEffect)(()=>{ef&&""!=ef.bech32Address?(ev(!0),checkUsdcBalance()):(ev(!1),e_("0"))},[ef]),(0,a.useEffect)(()=>{ey?(f(!1),el("Waiting for transaction to confirm.."),J(!0)):ed?(el("Trove opened successfully"),J(!0)):en?(el("Transaction was rejected"),J(!0)):J(!1)},[ed,ey,en]);let[eI,eB]=(0,a.useState)({expectedFee:0,expectedDebt:0,collateralRatio:0});d.Z.pow(10,18),d.Z.pow(10,20);let checkUsdcBalance=async()=>{if(ep&&ef)try{let e=await ep.getBalance(ef.bech32Address,"uxion"),t=Number(e.amount)/1e6;e_(t.toFixed(2))}catch(e){console.error("Error fetching  balance:",e)}},handleApprove=async(e,t)=>{o(!0),f(!0),e=Math.floor(1e6*Number(e)).toString(),t=Math.floor(1e6*Number(t)).toString();try{if(!ep||!ef)throw Error("Wallet not connected");let l={open_trove:{amount:String(e)}},a=await ep.execute(ef.bech32Address,s,l,{amount:[{amount:"0",denom:"uxion"}],gas:"500000",granter:"xion16p0xarpw90z3udum8camllltm2ayuxyspzm62pa2aprtwws5lqpqymjzdq"},"",(0,I.coins)(t,"uxion"));eC(a),ec(!0),er(a.transactionHash),console.log("success",a.transactionHash);try{await W.Z.post("https://xion.api.earthfi.org/storeAddress",{walletAddress:null==ef?void 0:ef.bech32Address}),console.log("Wallet address stored successfully.")}catch(e){console.error("Failed to store wallet address:",e)}let r={balance:{address:ef.bech32Address}};await ep.queryContractSmart("xion1svpxs5ay7w7ddznk6krk7q9f8rs973vm2fgvud84zm8s8fdkt94sc7j3a6",r)}catch(e){ei(!0),console.error("Deposit error:",e),P.Am.error("Deposit failed")}finally{o(!1)}};(0,a.useEffect)(()=>{eo&&(console.error("Write contract error:"),em(!0),et(!0))},[eo]),(0,a.useEffect)(()=>{ea&&f(!1)},[ea]);let makeCalculations=async(e,t)=>{o(!0);try{let s=Number(t),l=Number(e),a=v*l,r=Number(l+a+F),o=s*V*100/Number(r);eB({...eI,expectedFee:a,expectedDebt:r,collateralRatio:o})}catch(e){console.error(e)}finally{o(!1)}},handleClose=()=>{J(!1),et(!1),window.location.reload()},handlePercentageClick=s=>{let l=new d.Z(s).div(100),a=parseFloat(eM.toString());if(isNaN(a))console.error("Invalid PUSD balance:");else{let r=new d.Z(a).mul(l),o=r.toFixed(2);t({collatoral:e.collatoral,borrow:o}),eP(s)}},handlePercentageClickBTC=s=>{let l=new d.Z(s).div(100),a=parseFloat(eR||"0");if(isNaN(a))console.error("Invalid PUSD balance:",eR);else{let r=new d.Z(a).mul(l),o=r.toFixed(8);t({collatoral:o,borrow:e.borrow}),eW(s)}};(0,c.Z)(()=>{makeCalculations(e.borrow,e.collatoral)},10,[e.borrow,e.collatoral]);let eL=Number(e.collatoral)*V,eV=Number(q)/100,eM=(eL/Number(eV)-F)/1.05,eX=100*eI.expectedDebt/(eL||1),eU=Number(eV)*eI.expectedDebt/(Number(Number(e.collatoral))||1),e$="0"!==e.collatoral&&"0"!==e.borrow,eG="0"!==e.collatoral&&""!==e.collatoral.trim();return(0,a.useEffect)(()=>{let e=setTimeout(()=>{K(!0)},18e4);return()=>clearTimeout(e)},[]),(0,l.jsx)(l.Fragment,{children:i?(0,l.jsx)(L.Z,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"h-full pt-3 body-text md:ml-0 bg-black",children:[(0,l.jsx)("div",{className:"p-4 md:pt-2 ",children:(0,l.jsx)("div",{className:" shadow-lg  rounded-lg md:w-full  m-2",style:{backgroundColor:"#222222"},children:(0,l.jsxs)("div",{className:"md:container  flex flex-col md:flex-row  justify-between",children:[(0,l.jsx)("div",{className:" hidden md:block",children:(0,l.jsx)(b(),{src:N,alt:"home",className:"md:ml-0 ml-[20%]"})}),(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsxs)("h6",{className:" text-center title-text2 text-2xl md:text-3xl bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent mb-2 mt-4 ",children:["You don't have an existing trove."," "]}),(0,l.jsxs)("div",{className:"flex flex-col items-center md:flex-row",children:[(0,l.jsxs)("h6",{className:"title-text2 text-center font-medium text-lg bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent mb-2 md:mb-0 md:mr-1",children:["Mint ORE stablecoin by depositing"," "]}),(0,l.jsx)(b(),{src:B,alt:"home",height:40,className:"md:-mt-2 inline-block"})]})]}),(0,l.jsx)("div",{className:"hidden md:block",children:(0,l.jsx)(b(),{src:p,alt:"home",className:"md:ml-0 ml-[20%]"})})]})})}),(0,l.jsxs)("div",{className:"md:container flex flex-col p-8 md:p-0 md:flex-row justify-between gap-x-20 ",children:[(0,l.jsxs)("div",{className:"grid  w-full md:w-1/2 items-start space-y-7 gap-2 text-white md:p-5",children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)(H,{htmlFor:"items",className:"title-text2 text-xl text-md bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent",style:{fontWeight:"500",fontSize:"19px"},children:"Deposit collateral to mint ORE"}),(0,l.jsxs)("div",{className:"flex  md:w-[100%] rounded-lg items-center space-x-2 mt-[10px] -ml-3   md:-ml-0 border border-gray-400 ",style:{backgroundColor:"#343434",marginBottom:"1rem"},children:[(0,l.jsxs)("div",{className:"flex items-center  h-[3.5rem] ",children:[(0,l.jsx)(b(),{src:x.Z,alt:"home",className:"ml-1",width:40}),(0,l.jsx)("h3",{className:"text-white body-text ml-1 font-medium",children:"XION"}),(0,l.jsx)("h3",{className:"h-full border border-gray-500 mx-3 text-[#88e273]"})]}),(0,l.jsx)("input",{id:"items",placeholder:"Enter the amount of collateral",value:e.collatoral,onChange:s=>{let l=s.target.value;l&&"0"!==l?(t({...e,collatoral:l}),makeCalculations(e.borrow,l||"0")):(t({collatoral:l,borrow:"0"}),makeCalculations("0","0"))},className:"body-text font-medium text-gray-400 whitespace-nowrap  h-[3.5rem] flex-grow",style:{backgroundColor:"#343434"}}),(0,l.jsxs)("span",{className:"md:max-w-[fit]  md:p-2 mr-1 md:mr-0 font-medium text-gray-400 body-text h-full",children:["$",eL.toFixed(2)]})]}),(0,l.jsxs)("span",{className:"body-text font-medium text-gray-500 text-sm ",children:["Wallet Balance"," "]}),(0,l.jsxs)("div",{className:"pt-2  flex md:flex-row flex-col items-center justify-between   mt-[-1rem]",children:[(0,l.jsxs)("span",{className:"text-sm body-text w-full font-medium whitespace-nowrap flex flex-row ".concat(parseFloat(e.collatoral)>Number(eR)?"text-red-500":""),children:[(0,l.jsxs)("span",{className:"text-[#88e273] body-text font-medium text-sm",children:[Number(eR).toFixed(2)," XION"]}),(0,l.jsxs)("span",{className:"text-gray-500 ml-1 body-text font-medium text-sm",children:["$",(50*Number(eR)).toFixed(2)]})]}),(0,l.jsx)("div",{className:"flex flex-col md:flex-row w-full justify-between items-center",children:(0,l.jsxs)("div",{className:"flex gap-x-4 md:gap-x-2 w-full mt-2",children:[(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273]  body-text bg-[#222222] border-[#9A9A9A78] hover:bg-[#222222]",onClick:()=>handlePercentageClickBTC(25),children:"25%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClickBTC(50),children:"50%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClickBTC(75),children:"75%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClickBTC(100),children:"100%"})]})})]})]}),eG&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)(H,{htmlFor:"items",className:"title-text2 text-2xl text-md bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent",style:{fontWeight:"500",fontSize:"19px"},children:["Great, you got"," ",(0,l.jsxs)("span",{className:"title-text2 text-[#88e273] font-semibold",children:[eM>=0?Math.floor(100*eM)/100:"0.00"," ","ORE"]})," ","to mint"]}),(0,l.jsxs)("div",{className:"flex  rounded-lg items-center md:space-x-2 mt-[10px] -ml-3 md:-ml-0 border border-gray-400 ",style:{backgroundColor:"#343434",marginBottom:"1rem"},children:[(0,l.jsxs)("div",{className:"flex items-center h-[3.5rem] ",children:[(0,l.jsx)(b(),{src:u,alt:"home",className:"ml-1",width:40}),(0,l.jsx)("h3",{className:"text-gray-400 body-text font-medium hidden md:block mx-1",children:"ORE"}),(0,l.jsx)("h3",{className:"h-full border border-gray-400 text-[#88e273] mx-4"})]}),(0,l.jsx)("input",{id:"quantity",placeholder:"Enter the amount you want to mint",value:e.borrow,onChange:s=>{let l=s.target.value;t({...e,borrow:l}),makeCalculations(e.collatoral,l||"0")},className:"flex-grow text-gray-400 body-text font-medium  h-[3.5rem]",style:{backgroundColor:"#343434",marginLeft:"-0.5rem;"}}),(0,l.jsxs)("span",{className:"md:max-w-[fit]  md:p-2 mr-1 md:mr-0 font-medium text-gray-400 body-text h-full",children:["$",Number(e.borrow).toFixed(2)]})]}),(0,l.jsxs)("span",{className:"body-text font-medium text-gray-500 text-sm ",children:["Available"," "]}),(0,l.jsxs)("div",{className:"pt-2  flex md:flex-row flex-col items-center justify-between   mt-[-1rem]",children:[(0,l.jsxs)("span",{className:"text-sm body-text w-full font-medium whitespace-nowrap flex flex-row ".concat(parseFloat(e.collatoral)>Number(eR)?"text-red-500":""),children:[(0,l.jsxs)("span",{className:"text-[#88e273] body-text font-medium text-sm",children:[eM>=0?Math.floor(100*eM)/100:"0.00"," ","ORE"]}),(0,l.jsxs)("span",{className:"text-gray-500 ml-1 body-text font-medium text-sm",children:["$",eM>=0?Math.floor(100*eM)/100:"0.00"," "]})]}),(0,l.jsx)("div",{className:"flex flex-col md:flex-row w-full justify-between items-center",children:(0,l.jsxs)("div",{className:"flex gap-x-4 md:gap-x-2 w-full mt-2",children:[(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273]  body-text bg-[#222222] border-[#9A9A9A78] hover:bg-[#222222]",onClick:()=>handlePercentageClick(25),children:"25%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClick(50),children:"50%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClick(75),children:"75%"}),(0,l.jsx)(m.z,{disabled:!ew,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClick(100),children:"100%"})]})})]}),Number(e.borrow)<j&&Number(e.borrow)>0&&(0,l.jsxs)("span",{className:"text-red-500 body-text",children:["Borrow amount should be greater than ",j," "]})]}),(0,l.jsx)("button",{onClick:()=>handleApprove(e.borrow,e.collatoral),className:"rounded-3xl mt-5 md:-ml-0 -ml-4  h-[3rem] bg-[#88e273] title-text text-black font-bold ".concat(e.borrow&&e.collatoral?"hover:scale-95 bg-[#88e273]":" cursor-not-allowed opacity-50"),disabled:!e.borrow||!e.collatoral||eX>100/Number(eV)||parseFloat(e.borrow)>eM||parseFloat(e.collatoral)>Number(eR)||parseFloat(e.borrow)<j||h,style:{cursor:!e.borrow||h||!e.collatoral||eX>100/Number(eV)||parseFloat(e.borrow)>eM||parseFloat(e.collatoral)>Number(eR)||parseFloat(e.borrow)<j?"not-allowed":"pointer",opacity:!e.borrow||h||!e.collatoral||eX>100/Number(eV)||parseFloat(e.borrow)>eM||parseFloat(e.collatoral)>Number(eR)||parseFloat(e.borrow)<j?.5:1},children:h?"Opening Trove...":"OPEN TROVE"})]})]}),e$&&Number(e.borrow)>=j&&parseFloat(e.collatoral)<Number(eR)?(0,l.jsxs)("div",{className:"rounded-lg md:w-1/2 w-full mt-[55px] p-5 border-border-[#88e273]-200  h-fit space-y-5  text-white",style:{backgroundColor:"#222222"},children:[(0,l.jsxs)("div",{className:"flex whitespace-nowrap justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"body-text text-lg font-medium text-[#827f77]",children:"Loan-To-Value"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding14 ml_5",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:"custom-tooltip title-text2",target:".toolTipHolding14",content:"It is a ratio that measures the amount of a loan compared to the value of the collateral.",mouseTrack:!0,mouseTrackLeft:10})]}),r?"--":(0,l.jsxs)("span",{className:"overflow-x-clip text-lg body-text font-medium ".concat(eX>100/Number(eV)?"text-red-500":"text-[#88e273]"),children:[eX.toFixed(2)," %"," "]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("div",{className:"items-center flex",children:(0,l.jsx)("span",{className:" text-lg body-text font-medium text-[#827f77]",children:"Liquidation Price"})}),(0,l.jsxs)("span",{className:" text-lg body-text font-medium",children:["$",eU.toFixed(2)]})]}),(0,l.jsxs)("div",{className:"flex flex-row  ",children:[" ",(0,l.jsx)(b(),{src:Z,alt:"info",className:"mr-2 mt-[-1rem] 2xl:mt-0"}),(0,l.jsxs)("p",{className:"text-sm text-[#827f77] body-text font-medium ",children:["If the market price falls below the liquidation price, the Trove maybe liquidated."," "]})," "]}),(0,l.jsx)("div",{children:(0,l.jsx)("hr",{className:"border-[#827f77] border-1"})}),(0,l.jsxs)("div",{className:"flex body-text whitespace-nowrap justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"body-text text-sm font-medium text-[#827f77]",children:"Liq. Reserve"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding7 ml_5 -mt-[px]",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:"custom-tooltip title-text2",target:".toolTipHolding7",mouseTrack:!0,content:"The amount of debt set aside as a buffer to cover potential liquidation. This reserve helps ensure that there are sufficient funds to handle any shortfalls or losses that may occur.",mouseTrackLeft:10})]}),(0,l.jsxs)("span",{className:"body-text text-sm body-text font-medium",children:[F," ORE"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"text-sm body-text font-medium text-[#827f77]",children:"Borrowing Fee"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding12 ml_5",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:"custom-tooltip title-text2",target:".toolTipHolding12",mouseTrack:!0,content:"One-time fee charged on the borrowed amount.",mouseTrackLeft:10})]}),(0,l.jsxs)("span",{className:"text-sm body-text font-medium",children:[eI.expectedFee.toFixed(2)," ORE"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:" text-sm body-text font-medium text-[#827f77]",children:"Total Debt"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding16 ml_5",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:"custom-tooltip title-text2",target:".toolTipHolding16",content:"Total amount of stablecoin borrowed + liquidation reserve + borrowing fee of the position.",mouseTrack:!0,mouseTrackLeft:10})]}),Number(eI.expectedDebt)>F?(0,l.jsxs)("span",{className:" text-sm body-text font-medium",children:[eI.expectedDebt.toFixed(2)," ORE"]}):"---"]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center ",children:[(0,l.jsx)("span",{className:" text-sm body-text font-medium text-[#827f77]",children:"Total Collateral"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding17 ml_5 -mt-[2px] ",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:"custom-tooltip title-text2",target:".toolTipHolding17",content:"Total amount of collateral supplied in the position.",mouseTrack:!0,mouseTrackLeft:10})]}),(0,l.jsxs)("span",{className:" text-sm body-text font-medium",children:[Number(e.collatoral).toFixed(2)," XION"]})]})]}):(0,l.jsx)("div",{className:"rounded-lg md:w-1/2 w-full mt-[55px] p-5 border-border-[#88e273]-200  h-fit space-y-5  text-white"})]})]}),(0,l.jsx)(_.V,{visible:h,onHide:()=>f(!1),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-content",children:[(0,l.jsx)("div",{className:"py-5",children:(0,l.jsx)(b(),{src:k,alt:"box",width:140,className:""})}),(0,l.jsx)("div",{className:"p-5",children:(0,l.jsx)("div",{className:"waiting-message text-lg title-text2 text-[#88e273] whitespace-nowrap",children:"Transaction is initiated"})})]})})}),(0,l.jsx)(_.V,{visible:ee,onHide:()=>et(!1),header:()=>(0,l.jsx)("div",{className:"flex justify-content-between align-items-center",children:(0,l.jsx)(m.z,{className:"p-button-rounded p-button-text",onClick:()=>et(!1),children:"Close"})}),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsx)("div",{className:"dialog-content",children:(0,l.jsxs)("div",{className:"p-5",children:[(0,l.jsx)("div",{className:"waiting-message text-lg title-text text-white whitespace-nowrap",children:"Transaction rejected"}),(0,l.jsx)(m.z,{className:"p-button-rounded p-button-text",onClick:()=>et(!1),children:"Close"})]})})})}),(0,l.jsx)(_.V,{visible:Y,onHide:()=>J(!1),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsx)("div",{className:"dialog-content",children:(0,l.jsxs)("div",{className:"p-5",children:["Waiting for transaction to confirm.."===es?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b(),{src:A,alt:"rectangle",width:150}),(0,l.jsx)("div",{className:"my-5 ml-[6rem] mb-5"})]}):"Trove opened successfully"===es?(0,l.jsx)(b(),{src:S,alt:"tick",width:200}):en?(0,l.jsx)(b(),{src:y.Z,alt:"rejected",width:140}):(0,l.jsx)(b(),{src:A,alt:"box",width:140}),(0,l.jsx)("div",{className:"waiting-message title-text2 text-[#88e273]",children:es}),ed&&(0,l.jsx)("button",{className:"mt-1 p-3 text-black title-text2 hover:scale-95 bg-[#88e273]",onClick:handleClose,children:"Close"}),(en||!ed&&Q)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"body-text text-white text-xs",children:en?"Transaction was rejected. Please try again.":"Some Error Occurred On Network Please Try Again After Some Time.. \uD83E\uDD16"}),(0,l.jsx)(m.z,{className:" mt-1 p-3 hover:bg-[#6cd854] rounded-none md:w-[20rem] text-black title-text2 hover:scale-95 bg-[#88e273] ",onClick:handleClose,children:"Try again"})]})]})})})})]})})};var layout=e=>{let{children:t}=e;return(0,l.jsx)("div",{className:"font-mono font-bold",children:t})},V={src:"/_next/static/media/xionsmall.7c62b21d.svg",height:20,width:21,blurWidth:0,blurHeight:0},M={src:"/_next/static/media/Group 995.1ff03b00.svg",height:20,width:20,blurWidth:0,blurHeight:0},trove=()=>{let[e,t]=(0,a.useState)({depositCollateral:"",borrow:""}),s="xion1uw5wzl5mwxv52a2ctanrqgcdwqkz86895l35jw4vztmsul77k7zsyn4rch",r="xion16p0xarpw90z3udum8camllltm2ayuxyspzm62pa2aprtwws5lqpqymjzdq",[o,h]=(0,a.useState)(""),[f,p]=(0,a.useState)(0),[N,j]=(0,a.useState)(0),[E,z]=(0,a.useState)(0),[O,H]=(0,a.useState)(0),[q,B]=(0,a.useState)(0),[X,U]=(0,a.useState)(!1),[$,G]=(0,a.useState)(!1),[Q,K]=(0,a.useState)(0),[Y,J]=(0,a.useState)(0),[ee,et]=(0,a.useState)(0),[es,el]=(0,a.useState)(!1),[ea,er]=(0,a.useState)(0),[eo,ei]=(0,a.useState)(0),[ed,ec]=(0,a.useState)(0),[en,em]=(0,a.useState)("0"),[ex,eu]=(0,a.useState)(0),[eh,eb]=(0,a.useState)(0),[ef,ep]=(0,a.useState)(0),[eN,eg]=(0,a.useState)(0),[ej,ew]=(0,a.useState)(0),[ev,ey]=(0,a.useState)(0),[eA,ek]=(0,a.useState)(0),[eC,eS]=(0,a.useState)(0),[eT,eF]=(0,a.useState)(!1),[eE,ez]=(0,a.useState)(!1),[eO,eH]=(0,a.useState)(""),[eq,eR]=(0,a.useState)(!1),[e_,eD]=(0,a.useState)(!1),[eP,eZ]=(0,a.useState)(!1),[eW,eI]=(0,a.useState)(!1),[eB,eL]=(0,a.useState)(!0),[eV,eM]=(0,a.useState)(!1),[eX,eU]=(0,a.useState)(!1),[e$,eG]=(0,a.useState)(null),[eQ,eK]=(0,a.useState)(null),[eY,eJ]=(0,a.useState)({debt:"0",coll:"0"}),{data:e0}=(0,g.hT)(),{client:e2,logout:e1}=(0,g.Hj)(),[e5,e8]=(0,a.useState)(!1),[e3,e4]=(0,a.useState)("0"),[e7,e9]=(0,a.useState)(void 0),[e6,te]=(0,a.useState)(""),getTroveStatus=async()=>{if(e2&&e0)try{let e={get_user_info:{user:e0.bech32Address}},t=await e2.queryContractSmart(s,e),l=t.trove_status;!0===l?h("ACTIVE"):h("INACTIVE");let a=t.total_deposited,r=t.total_borrowed;eJ({debt:r,coll:a})}catch(e){console.error("Error fetching trove:",e)}};(0,a.useEffect)(()=>{e0&&e0.bech32Address?(e8(!0),checkUsdcBalance()):(e8(!1),e4("0"))},[e0]),(0,a.useEffect)(()=>{let initializeClient=async()=>{try{e2&&(eL(!1),await getTroveStatus())}catch(e){console.error("Error initializing client:",e),eL(!1),eM(!0)}};initializeClient()},[e2]);let tt=(0,a.useCallback)(()=>{ez(!1),eD(!1),el(!1),eZ(!1),window.location.reload()},[]),{toBigInt:ts}=n.default.utils;d.Z.pow(10,20),d.Z.pow(10,18),(0,a.useEffect)(()=>{let e=d.Z.pow(10,18);ts(e.toFixed());let getStaticData=async()=>{if(!e2)return null;let e=100*Number(eY.debt)/(Number(eY.coll)*Number(eC)||1);ec(e);let t=Number(eA)/100,s=Number(t)*Number(eY.debt)/Number(eY.coll);ei(s),G(!0)};getStaticData()},[e2]),(0,c.Z)(()=>{makeCalculations(e.borrow,e.depositCollateral)},10,[e.borrow,e.depositCollateral]);let checkUsdcBalance=async()=>{if(e2&&e0)try{let e=await e2.getBalance(e0.bech32Address,"uxion"),t=Number(e.amount)/1e6;e4(t.toFixed(8))}catch(e){console.error("Error fetching USDC balance:",e)}},handleApprove=async(e,t)=>{eI(!0),el(!0),""===e&&(e="0"),""===t&&(t="0"),e=Math.floor(1e6*Number(e)).toString(),t=Math.floor(1e6*Number(t)).toString();try{let l;if(!e2||!e0)throw Error("Wallet not connected");let a={deposit_asset_to_mint:{amount_deposit:String(t),amount:String(e)}};if("0"===t?l=await e2.execute(e0.bech32Address,s,a,{amount:[{amount:"0",denom:"uxion"}],gas:"500000",granter:r},"",[]):(console.log("coll in else block",t),l=await e2.execute(e0.bech32Address,s,a,{amount:[{amount:"0",denom:"uxion"}],gas:"500000",granter:r},"",(0,I.coins)(t,"uxion"))),e9(l),eU(!0),te(l.transactionHash),console.log("success update trove",l.transactionHash),l&&l.transactionHash)try{await W.Z.post("https://xion.api.earthfi.org/adjustTrove",{walletAddress:null==e0?void 0:e0.bech32Address}),console.log("update trove stored successfully.")}catch(e){console.error("Failed to store wallet address:",e)}else console.log("Deposit response is empty");let o={balance:{address:e0.bech32Address}};await e2.queryContractSmart("xion1svpxs5ay7w7ddznk6krk7q9f8rs973vm2fgvud84zm8s8fdkt94sc7j3a6",o)}catch(e){console.error("Deposit error:",e),P.Am.error("Deposit failed"),el(!1),eZ(!0),eD(!0)}finally{eI(!1)}};(0,a.useEffect)(()=>{let queryresponse=async()=>{if(e2)try{let e=await e2.queryContractSmart(s,{get_config:{}});e&&(eS(e.current_price/1e6||0),ek(e.lth||0),ew(e.liqr/1e6||0),eg(e.borrow_rate/e.br_decimal||0),ep(e.min_debt/1e6||0),er(e.lqp||0))}catch(e){console.error("Error fetching query data",e)}};queryresponse()},[e2]);let makeCalculations=async(t,s)=>{let l=Number(t),a=Number(s);if(!e2)return null;let r=eN*l,o=(Number(eY.coll)/1e6+a)*Number(eC),i=a*Number(eC);em(String(Number(eY.coll)/1e6+a)),J(i);let d=r+l+Number(eY.debt)/1e6,c=Number(eA)/100,n=Number(ea)/100,m=Number(n)*d/(Number(eY.coll)/1e6+a),x=(100*Number(d)/((Number(eY.coll)/1e6+a)*Number(eC))).toFixed(2);z(Number(x));let u=o/Number(c)-Number(eY.debt)/1e6-r;et(Number(u.toFixed(2))),p(Number(r.toFixed(4))),j(Number(d.toFixed(2))),parseFloat(e.depositCollateral)>0?eu(1):eu(0),parseFloat(e.borrow)>0?eb(1):eb(0),B(Number(m.toFixed(2)))},handlePercentageClick=s=>{let l=new d.Z(s).div(100),a=parseFloat(ti.toString());if(isNaN(a))console.error("Invalid PUSD balance:",tr);else{let r=new d.Z(a).mul(l);t({depositCollateral:e.depositCollateral,borrow:String(r)}),eG(s)}},handlePercentageClickBTC=s=>{let l=new d.Z(s).div(100),a=parseFloat(e3||"0");if(isNaN(a))console.error("Invalid PUSD balance:",e3);else{let r=new d.Z(a).mul(l),o=r.toFixed(8);t({depositCollateral:o,borrow:e.borrow}),eK(s)}},tl=Number(eA)/100,ta=Number(ea)/100,tr=Number(eY.coll)/1e6*Number(eC)/Number(tl)-Number(eY.debt)/1e6,to=Number(ta)*(Number(eY.debt)/Number(eY.coll)),ti=Number(en)*Number(eC)/Number(tl)-Number(eY.debt)/1e6,td=(100*Number(eY.debt)/(Number(eY.coll)*Number(eC))).toFixed(2),tc=parseFloat(e.depositCollateral)>Number(e3),tn=parseFloat(e.borrow)>ti,tm=ex+eh>=1||parseFloat(e.depositCollateral)<Number(eY.coll)/1e6||parseFloat(e.borrow)<Number(eY.debt)/1e6;return(0,a.useEffect)(()=>{eV&&(console.error("Write contract error:"),eZ(!0),eD(!0))},[eV]),(0,a.useEffect)(()=>{eW?(el(!1),eH("Waiting for transaction to confirm.."),ez(!0)):eX?(eH("Trove updated successfully."),ez(!0)):eP&&(eH("Transaction was rejected"),ez(!0))},[eX,eW,eP]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{eR(!0)},2e5);return()=>clearTimeout(e)},[]),parseFloat(e.depositCollateral),(0,l.jsxs)("div",{children:[eW||eB?e5?(0,l.jsx)(L.Z,{}):(0,l.jsx)(openTroveNotConnected,{}):(0,l.jsx)(layout,{children:e5?(0,l.jsxs)(l.Fragment,{children:["ACTIVE"===o&&(0,l.jsxs)("div",{style:{backgroundColor:"black"},className:"p-7",children:[(0,l.jsxs)("div",{className:"w-[103%] -ml-2  md:h-fit md:w-[97%] md:ml-4 p-3 justify-between flex flex-col md:flex-row rounded-xl",style:{backgroundColor:"#222222"},children:[(0,l.jsxs)("div",{className:"py-2 px-4 md:w-3/5",children:[(0,l.jsxs)("div",{className:"flex flex-row gap-8",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"body-text text-[rgba(255,255,255,0.54)] text-lg font-semibold leading-[27px]",children:"Debt"}),(0,l.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,l.jsx)(b(),{src:u,alt:"home",width:35,height:35}),(0,l.jsxs)("h6",{className:"body-text text-white font-semibold text-[28px] leading-[42px]",children:[(Number(eY.debt)/1e6).toFixed(2)," ","ORE"]}),(0,l.jsxs)("h6",{className:"text-[rgba(255,255,255,0.54)] font-semibold text-[16.95px] leading-[25.43px] mb-[-0.5rem] body-text",children:["$",(Number(eY.debt)/1e6).toFixed(2)," "]})]})]}),(0,l.jsxs)("div",{className:"md:flex md:flex-col text-white hidden",children:[(0,l.jsx)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] mb-2",children:"Trove Status"}),"ACTIVE"===o?(0,l.jsx)("div",{className:"border border-[#88e273] rounded-lg p-2 inline-flex items-center justify-center mt-0.5",children:(0,l.jsx)(b(),{width:90,height:90,src:v,alt:"Active status"})}):(0,l.jsx)("div",{className:"p-1",children:(0,l.jsx)(b(),{width:120,height:120,src:w,alt:"Inactive status"})})]})]}),(0,l.jsxs)("div",{className:"md:flex flex-wrap md:flex-row justify-between items-center mt-12 hidden ",children:[(0,l.jsxs)("div",{className:"flex flex-col ",children:[(0,l.jsx)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] mb-2",children:"Collateral"}),(0,l.jsx)("div",{className:"flex flex-row ",children:(0,l.jsxs)("span",{className:"body-text text-white font-semibold text-lg leading-6 ",children:[(Number(eY.coll)/1e6).toFixed(2)," ","XION"]})}),(0,l.jsxs)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] ",children:["$",(Number(eC)*(Number(eY.coll)/1e6)).toFixed(2)]})]}),(0,l.jsxs)("div",{className:"flex flex-col text-white",children:[(0,l.jsx)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] mb-2",children:"Available"}),(0,l.jsx)("div",{className:"flex flex-row items-center",children:Number(tr)>=0&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("span",{className:"body-text text-white font-semibold text-lg leading-6 ",children:[Number(tr).toFixed(2)," ORE"]})})}),Number(tr)>=0&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)]",children:["$",Number(tr).toFixed(2)]})})]}),(0,l.jsxs)("div",{className:"flex flex-col text-white -mt-4",children:[(0,l.jsx)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] mb-2",children:"Liquidation Price"}),(0,l.jsxs)("span",{className:"body-text text-white font-semibold text-lg leading-6 ml-0.5",children:["$",to.toFixed(2)]}),(0,l.jsx)("span",{className:"body-text font-semibold text-base leading-[18px] "})]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap justify-between items-center mt-12 md:hidden grid grid-cols-2 gap-x-6 gap-y-8",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] mb-2",children:"Collateral"}),(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)(b(),{src:V,alt:"XION",width:18,height:18}),(0,l.jsxs)("span",{className:"body-text text-white font-semibold text-lg leading-6 ml-0.5",children:[(Number(eY.coll)/1e6).toFixed(2)," ","XION"]})]}),(0,l.jsxs)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] ml-[1.125rem]",children:["$",(Number(eC)*(Number(eY.coll)/1e6)).toFixed(2)]})]}),(0,l.jsxs)("div",{className:"flex flex-col text-white",children:[(0,l.jsx)("span",{className:"body-text font-medium text-base leading-[18px] text-[rgba(255,255,255,0.54)] mb-2",children:"Available"}),(0,l.jsxs)("div",{className:"flex flex-row items-center",children:[(0,l.jsx)(b(),{src:M,alt:"ORE",width:18,height:18}),Number(tr)>=0&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("span",{className:"body-text text-white font-semibold text-lg leading-6 ml-0.5",children:[Number(tr).toFixed(2)," ORE"]})})]}),Number(tr)>=0&&(0,l.jsxs)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] ml-[1.125rem]",children:["$",Number(tr).toFixed(2)]})]}),(0,l.jsxs)("div",{className:"flex flex-col text-white",children:[(0,l.jsx)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] mb-2",children:"Trove Status"}),"ACTIVE"===o?(0,l.jsx)("div",{className:"border border-[#88e273] rounded-lg p-2 inline-flex items-center justify-center mt-0.5",children:(0,l.jsx)(b(),{width:90,height:90,src:v,alt:"Active status"})}):(0,l.jsx)("div",{className:"p-1",children:(0,l.jsx)(b(),{width:120,height:120,src:w,alt:"Inactive status"})})]}),(0,l.jsxs)("div",{className:"flex flex-col text-white",children:[(0,l.jsx)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] mb-2",children:"Liquidation Price"}),(0,l.jsxs)("span",{className:"body-text text-white font-semibold text-lg leading-6 ml-0.5",children:["$ ",to.toFixed(2)]}),(0,l.jsx)("span",{className:"body-text font-semibold text-base leading-[18px] text-[rgba(255,255,255,0.54)] md:hidden"})]})]})]}),(0,l.jsx)("div",{className:"md:w-[30%] w-full ",style:{backgroundColor:"#222222"},children:(0,l.jsxs)("div",{className:"flex flex-row md:flex-col justify-between text-white",children:[(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("div",{className:"h-1/2 flex flex-col items-center",children:[(0,l.jsx)("span",{className:"text-[rgba(255,255,255,0.54)] body-text ml-[0.5rem] text-base",children:"Loan to value"}),(0,l.jsx)(T.l,{value:Number(td)||0,showValue:!0,size:100,rangeColor:"#78887f",valueColor:"#3dde84",strokeWidth:7,readOnly:!0,className:"text-[#88e273]",textColor:"white"}),(0,l.jsx)("div",{className:"flex-col flex items-center -mt-4 w-[4.5rem]",children:(0,l.jsx)("span",{className:"text-xs text-[rgba(255,255,255,0.54)] body-text mt-2",children:"YOUR LTV"})})]})}),(0,l.jsx)("div",{className:"flex h-1/2 mt-[4rem] md:mt-4",children:(0,l.jsx)("div",{className:"flex items-start gap-2"})})]})})]}),(0,l.jsx)("div",{className:" md:mt-5",children:(0,l.jsx)("div",{className:"md:p-5 pt-20 flex-col flex",children:(0,l.jsx)("div",{className:" border-[#88e273]",children:(0,l.jsxs)(F.f,{className:"md:-ml-0  -ml-2",children:[(0,l.jsx)(F.x,{className:"p-[2px] bg-[#88e273] text-sm title-text ",header:"MINT",children:(0,l.jsx)("div",{className:"p-5",style:{backgroundColor:"black"},children:(0,l.jsxs)("div",{className:"flex-col flex md:flex-row md:justify-between gap-10",children:[(0,l.jsxs)("div",{className:"grid w-full md:w-1/2  space-y-7 items-start gap-2  py-7 pr-7   md:py-5 md:pr-5 md:pl-2",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(i._,{htmlFor:"items",className:"title-text2 text-xl text-md bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent",style:{fontWeight:"500",fontSize:"19px"},children:"Deposit collateral to mint ORE"}),(0,l.jsxs)("div",{className:"rounded-lg flex items-center mt-4 w-[19rem] md:w-[100%] md:-ml-0  border border-gray-400 px-2",style:{backgroundColor:"#343434",marginBottom:"1rem"},children:[(0,l.jsxs)("div",{className:"flex items-center h-[3.5rem]",children:[(0,l.jsx)(b(),{src:x.Z,alt:"home",className:"ml-1",width:41}),(0,l.jsx)("h6",{className:"text-white text-sm font-medium hidden md:block body-text ml-1",children:"XION"}),(0,l.jsx)("h3",{className:"h-full border border-gray-400 mx-4 text-[#88e273]"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center flex-1 gap-x-4",children:[(0,l.jsx)("input",{id:"items",placeholder:"Enter the amount of collateral",disabled:!e5,value:e.depositCollateral,onChange:s=>{let l=s.target.value;t({...e,depositCollateral:l})},className:"body-text text-sm w-full min-w-0 h-[4rem] text-gray-400 px-2",style:{backgroundColor:"#343434"}}),(0,l.jsxs)("span",{className:"text-sm body-text text-gray-400 whitespace-nowrap",children:["$",(parseFloat(e.depositCollateral||"0")*Number(eC)).toFixed(2)]})]})]}),(0,l.jsxs)("span",{className:"body-text font-medium text-gray-500 text-sm ",children:["Wallet Balance"," "]}),(0,l.jsxs)("div",{className:"pt-2  flex md:flex-row flex-col items-center justify-between   mt-[-1rem]",children:[(0,l.jsxs)("span",{className:"text-sm  font-medium body-text whitespace-nowrap ".concat(parseFloat(e.depositCollateral)>Number(e3)?"text-red-500":"text-[#88e273]"),children:[" ",Number(e3).toFixed(2)," XION",(0,l.jsxs)("span",{className:"text-gray-500 ml-1 body-text font-medium text-sm",children:["$",(50*Number(e3)).toFixed(2)]})]}),(0,l.jsx)("div",{className:"flex flex-col md:flex-row  justify-between items-center",children:(0,l.jsxs)("div",{className:"flex gap-x-4 md:gap-x-2 w-full mt-2",children:[(0,l.jsx)(m.z,{disabled:!e5,className:"text-sm border rounded-2xl border-[#88e273]  body-text bg-[#222222] border-[#9A9A9A78] hover:bg-[#222222]",onClick:()=>handlePercentageClickBTC(25),children:"25%"}),(0,l.jsx)(m.z,{disabled:!e5,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClickBTC(50),children:"50%"}),(0,l.jsx)(m.z,{disabled:!e5,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClickBTC(75),children:"75%"}),(0,l.jsx)(m.z,{disabled:!e5,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClickBTC(100),children:"100%"})]})})]})]}),(0,l.jsxs)("div",{className:"flex flex-col ",children:[(0,l.jsx)("div",{className:"",children:(0,l.jsxs)(i._,{htmlFor:"quantity",className:"title-text2 text-2xl text-md bg-gradient-to-b from-white via-white to-gray-400 bg-clip-text text-transparent",style:{fontWeight:"500",fontSize:"19px"},children:["Great, you got"," ",(0,l.jsxs)("span",{className:"title-text2 text-[#88e273] font-semibold",children:[ti>=0?Math.floor(100*ti)/100:Math.floor(100*tr)/100," ","ORE"]})," ","to mint"]})}),(0,l.jsxs)("div",{className:"rounded-lg flex items-center mt-4 w-[19rem] md:w-[100%] md:-ml-0  border border-gray-400 px-2",style:{backgroundColor:"#343434",marginBottom:"1rem"},children:[(0,l.jsxs)("div",{className:"flex items-center h-[3.5rem]",children:[(0,l.jsx)(b(),{src:u,alt:"home",className:"ml-1",width:41}),(0,l.jsx)("h6",{className:"text-white text-sm font-medium hidden md:block body-text ml-1",children:"ORE"}),(0,l.jsx)("h3",{className:"h-full border border-gray-400 mx-4 text-[#88e273]"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center flex-1 gap-x-4",children:[(0,l.jsx)("input",{id:"items",placeholder:"Enter the amount you want to mint ",disabled:!e5,value:e.borrow,onChange:s=>{let l=s.target.value;t({...e,borrow:l})},className:"body-text text-sm w-full min-w-0 h-[4rem] text-gray-400 px-2",style:{backgroundColor:"#343434"}}),(0,l.jsxs)("span",{className:"text-sm body-text text-gray-400 whitespace-nowrap",children:["$",parseFloat(e.borrow||"0").toFixed(2)]})]})]}),(0,l.jsx)("span",{className:"body-text font-medium text-gray-500 text-sm -mb-2",children:"Available"}),(0,l.jsxs)("div",{className:"pt-2  flex md:flex-row flex-col items-center justify-between   ",children:[(0,l.jsxs)("span",{className:"text-[#88e273] body-text font-medium text-sm flex flex-row ",children:[Number(ti)>=0?(0,l.jsxs)("h6",{className:"text-sm  font-medium body-text whitespace-nowrap mt-2 ".concat(parseFloat(e.borrow)>ti?"text-red-500":"text-[#88e273]"),children:[Math.trunc(100*Number(ti))/100," ","ORE",(0,l.jsx)("div",{})]}):(0,l.jsxs)("h6",{className:"text-sm  font-medium  body-text whitespace-nowrap mt-2 ".concat(parseFloat(e.borrow)>ti?"text-red-500":"text-[#88e273]"),children:[Math.trunc(100*Number(tr))/100," ","ORE",(0,l.jsx)("div",{})]})," ",(0,l.jsxs)("span",{className:"text-gray-500 ml-1 body-text font-medium text-sm mt-2",children:["$",ti>=0?Math.floor(100*ti)/100:Math.floor(100*tr)/100," "]})]}),(0,l.jsx)("div",{className:"flex flex-col md:flex-row  justify-between items-center",children:(0,l.jsxs)("div",{className:"flex gap-x-4 md:gap-x-2 w-full ",children:[(0,l.jsx)(m.z,{disabled:!e5,className:"text-sm border rounded-2xl border-[#88e273]  body-text bg-[#222222] border-[#9A9A9A78] hover:bg-[#222222]",onClick:()=>handlePercentageClick(25),children:"25%"}),(0,l.jsx)(m.z,{disabled:!e5,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClick(50),children:"50%"}),(0,l.jsx)(m.z,{disabled:!e5,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClick(75),children:"75%"}),(0,l.jsx)(m.z,{disabled:!e5,className:"text-sm border rounded-2xl border-[#88e273] body-text hover:bg-[#222222] bg-[#222222] border-[#9A9A9A78]",onClick:()=>handlePercentageClick(100),children:"100%"})]})})]}),(0,l.jsx)("button",{onClick:()=>handleApprove(e.borrow,e.depositCollateral),className:"rounded-3xl mt-9 md:-ml-0  w-[19rem] md:w-full title-text h-[3rem]\n                                   ".concat(tn||E>100/Number(tl)||tc||ex+eh==0?"bg-[#88e273] text-black opacity-50 cursor-not-allowed":" hover:scale-95  cursor-pointer bg-[#88e273]  text-black"),disabled:tn||tc||ex+eh==0||E>100/Number(tl),children:"UPDATE TROVE"})]})]}),(0,l.jsxs)("div",{className:"rounded-3xl px-1 pl-5 w-[18rem] -ml-4 md:px-6 md:w-1/2 pt-9  md:h-[21rem] ".concat(tm?"p-4":" p-16"," md:pt-10 md:mt-10 text-sm"),style:{backgroundColor:"#222222"},children:[(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,l.jsxs)("div",{className:"md:w-1/2 flex items-center",children:[(0,l.jsx)("span",{className:"body-text text-lg whitespace-nowrap text-[#84827a] font-medium",children:"Loan-To-Value"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding9 ml_5 cursor-pointer",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:" title-text2",target:".toolTipHolding9",content:"It is a ratio that measures the amount of a loan compared to the value of the collateral.",mouseTrack:!0,mouseTrackLeft:10})]}),(0,l.jsx)("div",{className:"md:w-1/2 text-lg whitespace-nowrap body-text flex justify-end pl-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsxs)("span",{className:"font-medium body-text",children:[Number(td).toFixed(2),"%"]}),ex+eh>=1&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-x-2",children:[(0,l.jsx)("span",{className:"text-[#88e273] text-sm",children:(0,l.jsx)(R.dhL,{})}),(0,l.jsxs)("span",{className:"text-lg body-text font-medium ".concat(E>100/Number(tl)?"text-red-500":""),children:[" ",Number(E).toFixed(2),"%"]})]})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row ",children:[(0,l.jsx)("div",{className:"md:w-1/2 flex items-center",children:(0,l.jsx)("span",{className:"body-text text-lg whitespace-nowrap text-[#84827a] font-medium",children:"Liquidation Price"})}),(0,l.jsx)("div",{className:"md:w-1/2 text-lg whitespace-nowrap body-text flex justify-end pl-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsxs)("span",{className:"font-medium body-text",children:["$",Number(to).toFixed(2)]}),ex+eh>=1&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-x-2",children:[(0,l.jsx)("span",{className:"text-[#88e273] text-sm",children:(0,l.jsx)(R.dhL,{})}),(0,l.jsxs)("span",{className:"text-lg body-text font-medium",children:[" ","$",Number(q).toFixed(2)," "]})]})]})})]}),(0,l.jsxs)("div",{className:"flex flex-row  mt-4",children:[" ",(0,l.jsx)(b(),{src:Z,alt:"info",className:"mr-2 mt-[-1rem]",width:21,height:21}),(0,l.jsxs)("p",{className:"text-xs text-[#827f77] body-text font-medium 2xl:-mt-2",children:["If the market price falls below the liquidation price, the Trove maybe liquidated."," "]})," "]}),(0,l.jsx)("div",{children:(0,l.jsx)("hr",{className:"border-[#827f77] border-1 mt-4 mb-4"})}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,l.jsxs)("div",{className:"md:w-1/2 flex items-center",children:[(0,l.jsx)("span",{className:"body-text text-sm whitespace-nowrap text-[#84827a] font-medium",children:"Total Debt"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding11 ml_5 cursor-pointer",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:" title-text2",target:".toolTipHolding11",content:"Total amount of stablecoin borrowed + liquidation reserve + borrowing fee of the position.",mouseTrack:!0,mouseTrackLeft:10})]}),(0,l.jsx)("div",{className:"md:w-1/2 text-sm whitespace-nowrap body-text flex justify-end pl-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsxs)("span",{className:"font-medium body-text",children:[(Number(eY.debt)/1e6).toFixed(2)," ","ORE"]}),eh>0&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-x-2",children:[(0,l.jsx)("span",{className:"text-[#88e273] text-sm",children:(0,l.jsx)(R.dhL,{})}),(0,l.jsxs)("span",{className:"text-sm body-text font-medium",children:[" ",Number(N).toFixed(2)," ","ORE"]})]})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,l.jsxs)("div",{className:"md:w-1/2 flex items-center",children:[(0,l.jsx)("span",{className:"body-text text-sm whitespace-nowrap text-[#84827a] font-medium",children:"Total Collateral"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding17  ml_5 cursor-pointer",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:" title-text2",target:".toolTipHolding17",mouseTrack:!0,content:"Total amount of collateral supplied in the position.",mouseTrackLeft:10})]}),(0,l.jsx)("div",{className:"md:w-1/2 text-sm whitespace-nowrap body-text flex justify-end pl-2",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsxs)("span",{className:"font-medium body-text",children:[(Number(eY.coll)/1e6).toFixed(2)," ","XION"]}),1==ex&&(0,l.jsxs)("div",{className:"flex justify-center items-center gap-x-2",children:[(0,l.jsx)("span",{className:"text-[#88e273] text-sm",children:(0,l.jsx)(R.dhL,{})}),(0,l.jsxs)("span",{className:"text-sm body-text font-medium \n                                               \n                                                  ",children:[" ",Number(en).toFixed(2)," ","XION"]})]})]})})]})]}),1==eh&&(0,l.jsxs)("div",{className:"flex flex-col md:flex-row mt-2",children:[(0,l.jsxs)("div",{className:"md:w-1/2 flex items-center",children:[(0,l.jsx)("span",{className:"body-text text-sm whitespace-nowrap text-[#84827a] font-medium",children:"Borrowing Fee"}),(0,l.jsx)(b(),{width:15,className:"toolTipHolding12 ml_5 cursor-pointer",src:C.Z,"data-pr-tooltip":"",alt:"info"}),(0,l.jsx)(D.u,{className:" title-text2",target:".toolTipHolding12",content:"One-time fee charged on the borrowed amount.",mouseTrack:!0,mouseTrackLeft:10})]}),(0,l.jsx)("div",{className:"md:w-1/2 text-sm whitespace-nowrap body-text flex justify-end pl-2",children:(0,l.jsx)("div",{className:"flex items-center ",children:(0,l.jsxs)("span",{className:"font-medium body-text",children:[Number(f).toFixed(2)," ","ORE"]})})})]})]})]})})}),(0,l.jsx)(F.x,{className:"p-[2px] bg-[#88e273] text-sm body-text ",header:"REPAY",children:(0,l.jsx)("div",{className:"w-full h-full border p-5 border-[#88e273]",style:{backgroundColor:"black"},children:(0,l.jsx)(Repay,{coll:parseFloat(eY.coll)/1e6,debt:parseFloat(eY.debt)/1e6,lr:ej,fetchedPrice:Number(eC),borrowRate:eN,minDebt:ef,recoveryMode:eT,cCR:ev,mCR:eA,troveStatus:o,liqp:ea})})}),(0,l.jsx)(F.x,{className:"p-[2px] bg-[#88e273] text-sm title-text",header:"CLOSE",children:(0,l.jsx)("div",{className:"w-full h-full",style:{backgroundColor:"black"},children:(0,l.jsx)(CloseTrove,{entireDebtAndColl:parseFloat(eY.coll)/1e6,debt:parseFloat(eY.debt)/1e6,debtwithoutDecimals:Number(eY.debt),liquidationReserve:ej})})})]})})})})]}),"INACTIVE"===o&&(0,l.jsx)("div",{className:"w-full h-auto",style:{backgroundColor:"#272315"},children:(0,l.jsx)(OpenTrove,{})})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(openTroveNotConnected,{})})}),(0,l.jsx)(_.V,{visible:es,onHide:()=>el(!1),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-content",children:[(0,l.jsx)("div",{className:"py-5",children:(0,l.jsx)(b(),{src:k,alt:"box",width:140,className:""})}),(0,l.jsx)("div",{className:"p-5",children:(0,l.jsx)("div",{className:"waiting-message text-lg title-text2 text-[#88e273] whitespace-nowrap",children:"Transaction is initiated"})})]})})}),(0,l.jsx)(_.V,{visible:e_,onHide:()=>eD(!1),header:()=>(0,l.jsx)("div",{className:"flex justify-content-between align-items-center",children:(0,l.jsx)(m.z,{className:"p-button-rounded p-button-text",onClick:()=>eD(!1),children:"Close"})}),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsx)("div",{className:"dialog-content",children:(0,l.jsxs)("div",{className:"p-5",children:[(0,l.jsx)("div",{className:"waiting-message text-lg title-text text-white whitespace-nowrap",children:"Transaction rejected"}),(0,l.jsx)(m.z,{className:"p-button-rounded p-button-text",onClick:()=>eD(!1),children:"Close"})]})})})}),(0,l.jsx)(_.V,{visible:eE,onHide:()=>ez(!1),children:(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsx)("div",{className:"dialog-content",children:(0,l.jsxs)("div",{className:"p-5",children:["Waiting for transaction to confirm.."===eO?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b(),{src:A,alt:"rectangle",width:150}),(0,l.jsx)("div",{className:"my-5 ml-[6rem] mb-5"})]}):"Trove updated successfully."===eO?(0,l.jsx)(b(),{src:S,alt:"tick",width:200}):eP?(0,l.jsx)(b(),{src:y.Z,alt:"rejected",width:140}):(0,l.jsx)(b(),{src:A,alt:"box",width:140}),(0,l.jsx)("div",{className:"waiting-message title-text2 text-[#88e273]",children:eO}),eX&&(0,l.jsx)("button",{className:"mt-1 p-3 text-black title-text2 hover:scale-95 bg-[#88e273]",onClick:tt,children:"Close"}),(eP||!eX&&eq)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{className:"body-text text-white text-xs",children:eP?"Transaction was rejected. Please try again.":"Some Error Occurred On Network Please Try Again After Some Time.. \uD83E\uDD16"}),(0,l.jsx)(m.z,{className:" mt-1 p-3 text-black rounded-none md:w-[20rem] title-text2 hover:bg-[#6cd854] hover:scale-95 bg-[#88e273] ",onClick:tt,children:"Try again"})]})]})})})})]})};function Home(){return(0,l.jsxs)("div",{className:"grid h-screen mainT w-full grid-cols-[max-content_1fr] overflow text-white",children:[(0,l.jsx)(r.L,{}),(0,l.jsxs)("div",{className:"body text-black  overflow-y-scroll ",children:[(0,l.jsx)("div",{className:"sticky z-50 mainT top-0  overflow-auto",children:(0,l.jsx)(o.Z,{})}),(0,l.jsx)("div",{className:"h-screen md:w-full w-screen ",style:{backgroundColor:"black"},children:(0,l.jsx)(trove,{})})]})]})}},99902:function(e,t,s){"use strict";var l=s(57437);s(2265),s(38671),t.Z=e=>(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"w-full h-screen bg-black bg-opacity-50 flex justify-center items-center",children:(0,l.jsx)("div",{className:"loader animate-ping ease-linear rounded-full border-8 border-t-8 h-24 w-24 animate-color-change"})})})},23611:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var l=s(57437),a=s(2265),r=s(54949),o=s(96061),i=s(81628);let d=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:o,asChild:c=!1,...n}=e,m=c?r.g7:"button";return(0,l.jsx)(m,{className:(0,i.cn)(d({variant:a,size:o,className:s})),ref:t,...n})});c.displayName="Button"},81628:function(e,t,s){"use strict";s.d(t,{cn:function(){return cn}});var l=s(57042),a=s(74769);function cn(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,l.W)(t))}},58970:function(){},48034:function(){},22032:function(){},24229:function(e,t){"use strict";t.Z={src:"/_next/static/media/TxnError.8fc33a39.gif",height:501,width:600,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[4350,8218,1676,9228,8933,1293,5505,6844,7675,4574,7240,2442,4928,4834,1646,5014,5550,5695,1964,6015,6858,4126,2971,2472,1744],function(){return e(e.s=83293)}),_N_E=e.O()}]);